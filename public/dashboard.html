<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Trading Portal</title>
  <link rel="stylesheet" href="/public/assets/styles.css" />
</head>
<body>
  <div class="app-shell">
    <aside class="sidebar">
      <div class="brand">ðŸ’¹ MoneyBlocks</div>
      <nav id="studentNav">
        <a class="nav-link" data-route="portfolio">Portfolio</a>
        <a class="nav-link" data-route="live">Live Prices</a>
        <a class="nav-link" data-route="trade">Trade</a>
        <a class="nav-link" data-route="shorts">Shorts</a>
        <a class="nav-link" data-route="activity">Activity</a>
        <a class="nav-link" data-route="scenarios">Crisis Scenarios</a>
        <a class="nav-link" data-route="settings">Settings</a>
      </nav>
      <div id="managerNav" style="display:none;">
        <div class="nav-label">Manager</div>
        <a class="nav-link" data-route="manage-stocks">Manage Stocks</a>
        <a class="nav-link" data-route="update-price">Update Stock Price</a>
        <a class="nav-link" data-route="manage-scenarios">Manage Scenarios</a>
        <a class="nav-link" data-route="participants">Participants</a>
      </div>
    </aside>
    <div class="sidebar-overlay"></div>
    <main class="main">
      <header class="header">
        <div class="left">
          <button class="sidebar-toggle" aria-label="Toggle navigation">â˜°</button>
          <span class="title" id="pageTitle">Portfolio</span>
        </div>
        <div class="actions">
          <span class="badge" id="connectionBadge" aria-live="polite" aria-atomic="true"><span class="status-dot offline"></span>Disconnected</span>
          <button class="user-menu" id="userMenu" type="button" aria-haspopup="menu" aria-expanded="false">User</button>
        </div>
      </header>
      <div class="content">
        <section id="portfolio" class="section active">
          <div class="grid two" id="portfolioSummary"></div>
          <div class="card">
            <div class="form-row" style="align-items:center; justify-content: space-between;">
              <h3 style="margin:0;">Positions</h3>
              <div id="portfolioValuation" class="muted"></div>
            </div>
            <table class="table" id="positionsTable">
              <thead><tr><th>Ticker</th><th>Qty</th><th>Avg Price</th><th>Current</th><th>P/L</th><th>Value</th><th>Actions</th></tr></thead>
              <tbody></tbody>
            </table>
          </div>
        </section>

        <section id="live" class="section">
          <div class="card">
            <div class="form-row"><input class="input" id="liveSearch" placeholder="Search ticker or name" aria-label="Search ticker or name" /></div>
            <table class="table" id="liveTable">
              <thead><tr><th>Ticker</th><th>Name</th><th>Price</th><th>Change</th><th>Updated</th></tr></thead>
              <tbody></tbody>
            </table>
          </div>
        </section>

        <section id="trade" class="section">
          <div class="card">
            <h3>Buy / Sell</h3>
            <div class="form-row">
              <input class="input" id="tradeSearch" placeholder="Search ticker or name" aria-label="Search ticker or name" />
              <select class="input" id="tradeSelect"></select>
            </div>
            <div id="tradeDetails" class="muted" style="margin:0.5rem 0;"></div>
            <div class="form-row">
              <label class="sr-only" for="buyQty">Buy quantity</label>
              <input type="number" class="input" id="buyQty" placeholder="Buy quantity" min="1" aria-label="Buy quantity" />
              <button class="btn" id="buyBtn">Buy</button>
            </div>
            <div class="form-row">
              <label class="sr-only" for="sellQty">Sell quantity</label>
              <input type="number" class="input" id="sellQty" placeholder="Sell quantity" min="1" aria-label="Sell quantity" />
              <button class="btn secondary" id="sellBtn">Sell</button>
            </div>
          </div>
        </section>

        <section id="shorts" class="section">
          <div class="grid two">
            <div class="card">
              <h3>Open Short</h3>
            <div class="form-row">
              <input class="input" id="shortSearch" placeholder="Find stock" aria-label="Find stock" />
              <select class="input" id="shortSelect"></select>
            </div>
            <div class="form-row">
              <label class="sr-only" for="shortQty">Short quantity</label>
              <input type="number" class="input" id="shortQty" placeholder="Quantity" min="1" aria-label="Short quantity" />
              <select class="input" id="shortDuration">
                <option value="">Duration (seconds)</option>
                <option value="3600">1 hour</option>
                <option value="86400">1 day</option>
                <option value="604800">1 week</option>
                </select>
              </div>
              <button class="btn" id="shortOpenBtn">Open Short</button>
            </div>
            <div class="card">
              <h3>Active Shorts</h3>
              <table class="table" id="shortsTable">
                <thead><tr><th>Ticker</th><th>Qty</th><th>Open</th><th>Current</th><th>P/L</th><th>Expires</th></tr></thead>
                <tbody></tbody>
              </table>
            </div>
          </div>
        </section>

        <section id="activity" class="section">
          <div class="card">
            <h3>Recent Activity</h3>
            <div id="activityFeed" class="muted">No activity to display yet.</div>
          </div>
        </section>

        <section id="scenarios" class="section">
          <div class="grid two" id="scenarioList"></div>
        </section>

        <section id="settings" class="section">
          <div class="card">
            <h3>Settings</h3>
            <p class="muted">Manage your account session.</p>
            <button class="btn danger" id="logoutBtn">Logout</button>
          </div>
        </section>

        <section id="manage-stocks" class="section">
          <div class="card">
            <div class="form-row">
              <label class="sr-only" for="newTicker">Ticker</label>
              <input class="input" id="newTicker" placeholder="Ticker" aria-label="Ticker" />
              <label class="sr-only" for="newName">Name</label>
              <input class="input" id="newName" placeholder="Name" aria-label="Name" />
              <label class="sr-only" for="newPrice">Initial price</label>
              <input class="input" id="newPrice" type="number" placeholder="Initial price" step="0.01" aria-label="Initial price" />
              <button class="btn" id="createStockBtn">Create Stock</button>
            </div>
            <table class="table" id="manageStocksTable">
              <thead><tr><th>Ticker</th><th>Name</th><th>Price</th><th></th></tr></thead>
              <tbody></tbody>
            </table>
          </div>
        </section>

        <section id="update-price" class="section">
          <div class="card">
            <h3>Update Stock Price</h3>
            <div class="form-row">
              <input class="input" id="priceSearch" placeholder="Search ticker or name" aria-label="Search ticker or name" />
              <select class="input" id="priceSelect"></select>
            </div>
            <div id="priceDetails" class="muted"></div>
            <div class="form-row">
              <label class="sr-only" for="newPriceValue">New price</label>
              <input class="input" id="newPriceValue" type="number" step="0.01" placeholder="New price" aria-label="New price" />
              <button class="btn" id="updatePriceBtn">Update Price</button>
            </div>
          </div>
        </section>

        <section id="manage-scenarios" class="section">
          <div class="card">
            <h3>Create Scenario</h3>
            <div class="form-row">
              <label class="sr-only" for="scenarioTitle">Scenario title</label>
              <input class="input" id="scenarioTitle" placeholder="Title" aria-label="Scenario title" />
              <label class="sr-only" for="scenarioStatus">Scenario status</label>
              <select class="input" id="scenarioStatus" aria-label="Scenario status">
                <option value="draft">Draft</option>
                <option value="published">Published</option>
              </select>
            </div>
            <label class="sr-only" for="scenarioDescription">Scenario description</label>
            <textarea class="input" id="scenarioDescription" placeholder="Description" rows="3" aria-label="Scenario description"></textarea>
            <div class="form-row">
              <label class="sr-only" for="scenarioStart">Scenario start</label>
              <input class="input" id="scenarioStart" type="datetime-local" aria-label="Scenario start" />
              <label class="sr-only" for="scenarioEnd">Scenario end</label>
              <input class="input" id="scenarioEnd" type="datetime-local" aria-label="Scenario end" />
            </div>
            <button class="btn" id="createScenarioBtn">Save Scenario</button>
          </div>
          <div class="card">
            <h3>Existing Scenarios</h3>
            <table class="table" id="scenarioTable">
              <thead><tr><th>Title</th><th>Status</th><th>Window</th><th></th></tr></thead>
              <tbody></tbody>
            </table>
          </div>
        </section>

        <section id="participants" class="section">
          <div class="card">
            <div class="form-row">
              <input class="input" id="participantSearch" placeholder="Search participants" aria-label="Search participants" />
              <input class="input" id="participantUsername" placeholder="Username" autocomplete="username" aria-label="Participant username" />
              <input class="input" id="participantEmail" placeholder="Email" autocomplete="email" type="email" aria-label="Participant email" />
              <button class="btn" id="createParticipantBtn">Add Participant</button>
            </div>
            <table class="table" id="participantsTable">
              <thead><tr><th>User</th><th>Email</th><th>Cash</th><th></th></tr></thead>
              <tbody></tbody>
            </table>
          </div>
        </section>
      </div>
    </main>
  </div>
  <script type="module" src="/public/assets/app.js"></script>
</body>
</html>
